<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Wasp : Android network library">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
      <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>

    <title>Wasp</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/orhanobut/wasp">View on GitHub</a>

          <h1 id="project_title">Wasp</h1>
          <h2 id="project_tagline">Android network library</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/orhanobut/wasp/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/orhanobut/wasp/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>Introduction</h2>
      <p>Wasp is a wrapper for network libraries in order to make it simple. 
      Currently volley is used as default current network stack. 
      The idea is to get rid of request classes and gather them into one place and easy to access them. 
      It is customizable for every situation and you don't need to struggle with json converter as well.
        We try to implement the best practices and tools in order to make everything compact.
        You don't need to worry about to combine everything since we handled everything already.
        Following tools are used in the system:
      </p>
      <ul>
        <li>Volley</li>
        <li>Gson</li>
        <li>OkHttp</li>
      </ul>


      <h2>Gradle</h2>
      <pre class='prettyprint'>
repositories {
    maven { url "https://oss.sonatype.org/content/repositories/snapshots/"}
}
dependencies {
    compile 'com.orhanobut:wasp:1.0.0-SNAPSHOT'
}</pre>

     <h2>Usage</h2>

     <h4>Create your service class</h4>
     <p>Create a service interface. This will be used to make the network requests.You can use appropriate annotations to define the request. All network methods should be inside this interface </p>
     <ul>
      <li>@GET,@DELETE,@POST,@PUT can be used for http method.</li>
      <li>@Path is used for replacement for specific words in the url. </li>
     </ul>
<pre class='prettyprint'>
public interface GitHubService {

    @GET("/repos/{user}/{repo}")
    void fetchRepo(
          @Path("user") String user,
          @Path("repo") String repo,
          CallBack<List<Repo>> callBack
    );

    @POST("/repos/{user}/{repo}")
    void addName(
          @Path("user") String user,
          @Body Repo repo,
          CallBack<Repo> callBack
    );
}</pre>

<br>
     <h4>Initialize builder</h4>
     <p>Best approach would be to initialize it in the application class and use it as singleton.</p>
<pre class='prettyprint'>
 GitHubService service = new Wasp.Builder(this)    
        .setEndpoint("https://api.github.com")   // Must be set
        .setLogLevel(LogLevel.ALL)               // Optional, default ALL   
        .setParser(new GsonParser())             // Optional, default Gson
        .build()                                 // Must be called
        .create(MyService.class);                // Must be called 
</pre>


<br>
     <h4>Use it everywhere</h4>
     <p>Use the service instance to make network calls</p>
<pre class='prettyprint'>
service.fetchRepo("github","wasp", new CallBack<List<Repo>>{
      
      @Override
      public void onSuccess(List<Repo> repos) {
          
      }

      @Override
      public void onError(WaspError error) {

      }
});
</pre>

<br>
     <h4>Add Body</h4>
     <ul>
      <li>@Body can be used to add an object for request body. Object will be converted to json.</li>
      <li>@BodyMap can be used to add a Map object instead of creating body class. It will be converted to json. You can use
      @BodyMap for the simple operations which you don't want to create a class.</li>
     </ul>
<pre class='prettyprint'>
    @POST("/repos")
    void addName(
        @Body Repo repo,
        CallBack<Repo> callBack
    );
    
    service.addName(new Repo("3423",3),new CallBack<Repo>{
        //
    });
    
    or
    
    @POST("/repos")
    void addName(
        @BodyMap Map map,
        CallBack<Repo> callBack
    );

    Map<String,Object> map = new HashMap<>();
    map.put("ip","324234234");
    map.put("page",34);
    
    service.addName(map,new CallBack<Repo>{
        //
    });
</pre>

<br>
     <h4>Add Query Params</h4>
     <ul>
      <li>@Query is used to add query params</li>
     </ul>
<pre class='prettyprint'>
    @GET("/users/repos")
    void fetchRepoBySearch(
          @Query("page") int pageNumber,
          @Query("sort") String sort,
          CallBack<List<Repo>> callBack
    );

    service.fetchRepoBySearch(2,"asc",new CallBack<List<Repo>>{
        //
    });

    //output url: <BASEURL>/users/repos?page=2&sort=asc
</pre>


<br>
     <h4>Add Headers</h4>
     <ul>
      <li>@Header is used to add headers by using params</li>
      <li>@Headers is used to add static headers by adding to method</li>
     </ul>
<pre class='prettyprint'>

    //using parameter
    @GET("/repos")
    void fetchRepos(
          @Header("auth") String authToken,
          RepoCallBack<List<Repo> callBack
    );

    //Single static header
    @Headers("Accept-Language:en-En")
    @GET("/users")
    void fetchUsers(
          RepoCallBack<List<Repo> callBack
    );


    // Multiple static headers
    @Headers({
        "Accept-Language:en-En",
        "Content-type:application/json"
    })
    @GET("/users")
    void fetchUsers2(
          RepoCallBack<List<Repo> callBack
    );
</pre>


<br>
     <h4>Request Interceptor</h4>
     <p>You can add static headers and query params to each service by using request interceptor</p>
<pre class='prettyprint'>

  RequestInterceptor interceptor = new RequestInterceptor() {
      @Override                                              
      public Map<String, String> getHeaders() {              
          return null;                                       
      }                                                      
                                                           
      @Override                                              
      public Map<String, String> getQueryParams() {          
          return null;                                       
      }                                                      
  };

  GitHubService service = new Wasp.Builder(this)    
        .setEndpoint("https://api.github.com")   
        .setRequestInterceptor(interceptor)        
        .build()                        
        .create(MyService.class);   
</pre>



<br>
     <h4>Http Stack</h4>
     <p>You can set your custom http stack instead of default. Default is okhttp.</p>
<pre class='prettyprint'>

  GitHubService service = new Wasp.Builder(this)    
        .setEndpoint("https://api.github.com")   
        .setHttpStack(new YourHttpStack());       
        .build()                        
        .create(MyService.class);   
</pre>

<br>
<h4>TODO</h4>
<p>Contribute to complete below todos</p>
  <ul>
    <li>Volley retry policy</li>
    <li>mock data support (local file or dynamic)</li>
    <li>certificate pinning support</li>
    <li>trust-all certificate support for testing purposes</li>
    <li>Optimize imageloader and make it easy in use.</li>
    <li>Improve log</li>
    <li>Improve error handling and error response</li>
    <li>Improve the test coverage</li>
  </ul>     
       
        </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
         <p class="copyright">Contributers: <a href="https://github.com/orhanobut">Orhan Obut</a> , 
         <a href="https://github.com/emmar313">Emmar Kardeslik</a>
         </p>
      </footer>
    </div>

    

  </body>
</html>
